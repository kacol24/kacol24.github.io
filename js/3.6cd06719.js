(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{9508:function(e,t,i){"use strict";var s=i("9ee8"),a=i.n(s);a.a},"9ee8":function(e,t,i){},d1b3:function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("q-page",{staticClass:"flex flex-center",attrs:{padding:""}},[i("div",{staticClass:"row full-width"},[i("div",{staticClass:"col-12 col-sm-6"},[i("div",{staticClass:"q-pr-sm-md full-height flex flex-center"},[i("div",{staticClass:"row full-width"},[i("div",{staticClass:"col-12"},[i("div",{staticClass:"q-mx-auto",staticStyle:{"max-width":"300px"}},[i("q-responsive",{staticStyle:{"background-size":"cover","background-position":"center"},style:[e.imageSrc?{"background-image":"url("+e.imageSrc+")"}:""],attrs:{ratio:3/4},on:{click:e.takeSelfie}},[e.imageSrc?e._e():i("img",{staticClass:"q-mx-auto block",staticStyle:{"max-width":"100%",height:"auto"},attrs:{src:"images/blank_portrait_pointer.png",alt:"blank image"}})])],1)])])])]),i("div",{staticClass:"col-12 col-sm-6 flex flex-center"},[i("div",{staticClass:"q-pl-sm-md full-width"},[i("div",{staticClass:"text-center"},[e.selectedEmployee?i("h4",{staticClass:"q-mt-md q-mt-sm-none q-mb-md"},[e._v("\n            "+e._s(e.selectedEmployee.name)+"\n          ")]):e._e()]),e.selectedEmployee?[e.selectedEmployee.on_shift?e._e():i("q-slide-item",{attrs:{"left-color":"positive",disabled:!e.selfie},on:{left:e.clockIn},scopedSlots:e._u([e.selfie?{key:"left",fn:function(){return[i("div",{staticClass:"row items-center"},[i("q-icon",{staticClass:"q-mr-md",attrs:{name:"play_circle_filled"}}),e._v("\n                Clock In\n              ")],1)]},proxy:!0}:null],null,!0)},[i("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"bg-green-4",attrs:{dark:"",disabled:!e.selfie}},[i("q-item-section",{staticClass:"animated slideOutRight infinite",staticStyle:{"animation-duration":"2s"},attrs:{avatar:""}},[i("q-avatar",{attrs:{color:"positive","text-color":"white",icon:"double_arrow"}})],1),i("q-item-section",{staticClass:"text-weight-bolder q-ml-xl"},[e._v("\n                MULAI SHIFT\n              ")])],1)],1),e.selectedEmployee.on_shift?i("q-slide-item",{attrs:{"left-color":"negative",disabled:!e.selfie},on:{left:e.clockOut},scopedSlots:e._u([e.selfie?{key:"left",fn:function(){return[i("div",{staticClass:"row items-center"},[i("q-icon",{staticClass:"q-mr-md",attrs:{name:"stop"}}),e._v("\n                Clock Out\n              ")],1)]},proxy:!0}:null],null,!0)},[i("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"bg-red-4",attrs:{dark:"",disabled:!e.selfie}},[i("q-item-section",{staticClass:"animated slideOutRight infinite",staticStyle:{"animation-duration":"2s"},attrs:{avatar:""}},[i("q-avatar",{attrs:{color:"negative","text-color":"white",icon:"double_arrow"}})],1),i("q-item-section",{staticClass:"text-weight-bolder q-ml-xl"},[e._v("\n                AKHIRI SHIFT\n              ")])],1)],1):e._e()]:e._e(),e.selectedEmployee&&e.selectedEmployee.attendances?i("div",{staticClass:"q-mt-md q-mb-md"},e._l(e.selectedEmployee.attendances,(function(t){return i("q-list",{key:t.id,attrs:{bordered:"",separator:""}},[t.end_at?i("q-item",{staticClass:"bg-red-1"},[i("q-item-section",[i("q-item-label",[e._v("\n                  Clock Out\n                ")]),i("q-item-label",{attrs:{caption:""}},[e._v("\n                  "+e._s(t.formatted_end_at)+"\n                ")])],1)],1):e._e(),t.start_at?i("q-item",{staticClass:"bg-green-1"},[i("q-item-section",[i("q-item-label",[e._v("\n                  Clock In\n                ")]),i("q-item-label",{attrs:{caption:""}},[e._v("\n                  "+e._s(t.formatted_start_at)+"\n                ")])],1)],1):e._e()],1)})),1):e._e()],2)])])])},a=[],l=(i("e6cf"),i("a79d"),i("c973")),n=i.n(l),c=i("81c3");const{Camera:o}=c["d"];var r={name:"CameraPage",data(){return{selfie:null,imageSrc:null,selectedEmployee:{name:null,on_shift:!1}}},methods:{takeSelfie(){var e=this;return n()((function*(){if(!e.requireSelfie())return!1;try{const t=yield o.getPhoto({allowEditing:!1,direction:c["a"].Front,height:400,source:c["c"].Camera,quality:90,resultType:c["b"].Uri});t&&(e.imageSrc=t.webPath,e.selfie=yield fetch(t.webPath).then(e=>e.blob()))}catch(t){console.log(t)}}))()},clockIn(){this.$q.loading.show(),this.$store.dispatch("employee/clockIn",{selfie:this.selfie}).finally(()=>{this.$q.loading.hide()})},clockOut(){this.$q.loading.show(),this.$store.dispatch("employee/clockOut").finally(()=>{this.$q.loading.hide()})},requireSelfie(){if(!this.$q.platform.is.capacitor)return!1;let e=this.selectedEmployee.attendances[0];return!e||null!==e.end_at}},mounted(){let e=this.$route.params.employee_id;if(this.$store.dispatch("employee/selectEmployee",e),this.selectedEmployee=this.$store.state.employee.selectedEmployee,!this.selectedEmployee)return this.$router.back();let t=this.selectedEmployee.attendances[0];this.imageSrc=null,t&&t.selfie&&(this.imageSrc=t.selfie_url),this.takeSelfie()},beforeDestroy(){this.imageSrc=null}},d=r,m=(i("9508"),i("2877")),u=i("9989"),p=i("0e51"),f=i("de1d"),h=i("0016"),q=i("66e5"),v=i("4074"),_=i("cb32"),g=i("1c1c"),y=i("0170"),b=i("714f"),C=i("eebe"),k=i.n(C),w=Object(m["a"])(d,s,a,!1,null,"d157c928",null);t["default"]=w.exports;k()(w,"components",{QPage:u["a"],QResponsive:p["a"],QSlideItem:f["a"],QIcon:h["a"],QItem:q["a"],QItemSection:v["a"],QAvatar:_["a"],QList:g["a"],QItemLabel:y["a"]}),k()(w,"directives",{Ripple:b["a"]})}}]);